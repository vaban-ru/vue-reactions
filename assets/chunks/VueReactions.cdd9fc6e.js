import{f as y,r as b,g as R,o as l,c as u,a as d,h as f,F as p,i as v,u as k,n as x,t as V,_ as I}from"../app.22efe77a.js";const C={class:"vue-reactions"},L=["title"],H=["innerHTML"],M=["title","onClick"],T=["innerHTML"],B={key:0},S={key:1,class:"vue-reactions__dropdown"},$={class:"vue-reactions__dropdown-grid"},w=["title","onClick"],N=["innerHTML"],j=y({__name:"VueReactions",props:{reactions:null,modelValue:null,storage:null,multiple:{type:Boolean,default:!1},hasDropdown:{type:Boolean,default:!1}},emits:["update:modelValue","update:storage"],setup(a,{emit:i}){const c=a,s=b(c.modelValue),g=n=>c.storage.findIndex(e=>Number(e)===n)!==-1,m=n=>{const t=[...c.storage];if(t&&t.length){const e=t.findIndex(o=>Number(o)===n);return e!==-1?(t.splice(e,1),i("update:storage",t),"remove"):c.multiple?(t.push(n),i("update:storage",t),"add"):(t[0]=n,i("update:storage",t),"replace")}else return i("update:storage",[n]),"add"},r=n=>{const t=s.value.find(_=>_.id===n.id),e=s.value.findIndex(_=>_.id===n.id),o=m(n.id);t?o==="add"?t.count?t.count++:t.count=1:o==="remove"&&(t.count&&t.count>1?t.count--:s.value.splice(e,1)):o==="add"?s.value.push({id:n.id,count:1}):o==="replace"&&(s.value.splice(e,1),s.value.push({id:n.id,count:1})),i("update:modelValue",s.value)},h=R(()=>{const n=[];return c.reactions.forEach(t=>{const e=s.value.find(o=>o.id===t.id);e&&n.push({...t,count:e.count})}),n});return(n,t)=>(l(),u("div",C,[a.modelValue.length?f("",!0):(l(),u("button",{key:0,title:a.reactions[0].label,onClick:t[0]||(t[0]=e=>r(a.reactions[0])),type:"button",class:"vue-reactions__btn"},[d("span",{innerHTML:a.reactions[0].emoji},null,8,H)],8,L)),(l(!0),u(p,null,v(k(h),e=>(l(),u("button",{title:e.label,class:x(["vue-reactions__btn",{"vue-reactions__btn--active":g(e.id)}]),onClick:o=>r(e),key:`selected-reaction-${e.id}`,type:"button"},[d("span",{innerHTML:e.emoji},null,8,T),e.count&&e.count>1?(l(),u("span",B,V(e.count),1)):f("",!0)],10,M))),128)),a.reactions&&a.hasDropdown?(l(),u("div",S,[d("div",$,[(l(!0),u(p,null,v(a.reactions,e=>(l(),u("button",{title:e.label,onClick:o=>r(e),key:`reaction-${e.id}`,type:"button",class:"vue-reactions__reaction"},[d("span",{innerHTML:e.emoji},null,8,N)],8,w))),128))])])):f("",!0)]))}});const D=I(j,[["__scopeId","data-v-05d8a063"]]);export{D as V};
